{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/cerigoff/instagram_redesign_release_v1/frontend/components/main/Profile.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { FontAwesome5 } from '@expo/vector-icons';\nimport firebase from 'firebase';\n\nrequire('firebase/firestore');\n\nimport { connect } from 'react-redux';\nimport { text, utils, container, navbar } from \"../styles\";\n\nfunction Profile(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      userPosts = _useState2[0],\n      setUserPosts = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      following = _useState6[0],\n      setFollowing = _useState6[1];\n\n  useEffect(function () {\n    var currentUser = props.currentUser,\n        posts = props.posts;\n\n    if (props.route.params.uid === firebase.auth().currentUser.uid) {\n      setUser(currentUser);\n      setUserPosts(posts);\n    } else {\n      firebase.firestore().collection(\"users\").doc(props.route.params.uid).get().then(function (snapshot) {\n        if (snapshot.exists) {\n          setUser(_objectSpread({\n            uid: props.route.params.uid\n          }, snapshot.data()));\n        } else {\n          console.log('does not exist');\n        }\n      });\n      firebase.firestore().collection(\"posts\").doc(props.route.params.uid).collection(\"userPosts\").orderBy(\"creation\", \"desc\").get().then(function (snapshot) {\n        var posts = snapshot.docs.map(function (doc) {\n          var data = doc.data();\n          var id = doc.id;\n          return _objectSpread({\n            id: id\n          }, data);\n        });\n        setUserPosts(posts);\n      });\n    }\n\n    if (props.following.indexOf(props.route.params.uid) > -1) {\n      setFollowing(true);\n    } else {\n      setFollowing(false);\n    }\n  }, [props.route.params.uid, props.following, props.currentUser, props.posts]);\n\n  var onFollow = function onFollow() {\n    firebase.firestore().collection(\"following\").doc(firebase.auth().currentUser.uid).collection(\"userFollowing\").doc(props.route.params.uid).set({});\n  };\n\n  var onUnfollow = function onUnfollow() {\n    firebase.firestore().collection(\"following\").doc(firebase.auth().currentUser.uid).collection(\"userFollowing\").doc(props.route.params.uid).delete();\n  };\n\n  if (user === null) {\n    return React.createElement(View, {\n      style: container.form,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, React.createElement(Text, {\n      style: text.notAvailable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, \"User Not Found\"));\n  }\n\n  return React.createElement(View, {\n    style: [container.container, utils.backgroundWhite],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: [navbar.custom, utils.justifyCenter],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: navbar.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, user.username)), React.createElement(View, {\n    style: [container.profileInfo],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: [utils.noPadding, container.row],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, user.image == 'default' ? React.createElement(FontAwesome5, {\n    style: [utils.profileImageBig, utils.marginBottomSmall],\n    name: \"user-circle\",\n    size: 80,\n    color: \"black\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }) : React.createElement(Image, {\n    style: [utils.profileImageBig, utils.marginBottomSmall],\n    source: {\n      uri: user.image\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }), React.createElement(View, {\n    style: [container.container, container.horizontal, utils.justifyCenter, utils.padding10Sides],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, React.createElement(View, {\n    style: [utils.justifyCenter, text.center, container.containerImage],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: [text.bold, text.large, text.center],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 29\n    }\n  }, userPosts.length), React.createElement(Text, {\n    style: [text.center],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  }, \"Posts\")), React.createElement(View, {\n    style: [utils.justifyCenter, text.center, container.containerImage],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: [text.bold, text.large, text.center],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, user.followersCount), React.createElement(Text, {\n    style: [text.center],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }, \"Followers\")), React.createElement(View, {\n    style: [utils.justifyCenter, text.center, container.containerImage],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: [text.bold, text.large, text.center],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 29\n    }\n  }, user.followingCount), React.createElement(Text, {\n    style: [text.center],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, \"Following\")))), React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: text.bold,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, user.name), React.createElement(Text, {\n    style: [text.profileDescription, utils.marginBottom],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, user.description), props.route.params.uid !== firebase.auth().currentUser.uid ? React.createElement(View, {\n    style: [container.horizontal],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  }, following ? React.createElement(TouchableOpacity, {\n    style: [utils.buttonOutlined, container.container, utils.margin15Right],\n    title: \"Following\",\n    onPress: function onPress() {\n      return onUnfollow();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 33\n    }\n  }, React.createElement(Text, {\n    style: [text.bold, text.center, text.green],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 37\n    }\n  }, \"Following\")) : React.createElement(TouchableOpacity, {\n    style: [utils.buttonOutlined, container.container, utils.margin15Right],\n    title: \"Follow\",\n    onPress: function onPress() {\n      return onFollow();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 37\n    }\n  }, React.createElement(Text, {\n    style: [text.bold, text.center],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 41\n    }\n  }, \"Follow\")), React.createElement(TouchableOpacity, {\n    style: [utils.buttonOutlined, container.container],\n    title: \"Follow\",\n    onPress: function onPress() {\n      return props.navigation.navigate('Chat', {\n        user: user\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  }, React.createElement(Text, {\n    style: [text.bold, text.center],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 33\n    }\n  }, \"Message\"))) : React.createElement(TouchableOpacity, {\n    style: utils.buttonOutlined,\n    onPress: function onPress() {\n      return props.navigation.navigate('Edit');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: [text.bold, text.center],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 29\n    }\n  }, \"Edit Profile\")))), React.createElement(View, {\n    style: [utils.borderTopGray],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, React.createElement(FlatList, {\n    numColumns: 3,\n    horizontal: false,\n    data: userPosts,\n    style: utils.marginBottomBar,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(TouchableOpacity, {\n        style: [container.containerImage, utils.borderWhite],\n        onPress: function onPress() {\n          return props.navigation.navigate(\"Post\", {\n            item: item,\n            user: user\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 25\n        }\n      }, React.createElement(Image, {\n        style: container.image,\n        source: {\n          uri: item.downloadURL\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 29\n        }\n      }));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  })));\n}\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.userState.currentUser,\n    posts: store.userState.posts,\n    following: store.userState.following\n  };\n};\n\nexport default connect(mapStateToProps, null)(Profile);","map":{"version":3,"sources":["/Users/cerigoff/instagram_redesign_release_v1/frontend/components/main/Profile.js"],"names":["React","useState","useEffect","FontAwesome5","firebase","require","connect","text","utils","container","navbar","Profile","props","userPosts","setUserPosts","user","setUser","following","setFollowing","currentUser","posts","route","params","uid","auth","firestore","collection","doc","get","then","snapshot","exists","data","console","log","orderBy","docs","map","id","indexOf","onFollow","set","onUnfollow","delete","form","notAvailable","backgroundWhite","custom","justifyCenter","title","username","profileInfo","noPadding","row","image","profileImageBig","marginBottomSmall","uri","horizontal","padding10Sides","center","containerImage","bold","large","length","followersCount","followingCount","name","profileDescription","marginBottom","description","buttonOutlined","margin15Right","green","navigation","navigate","borderTopGray","marginBottomBar","item","borderWhite","downloadURL","mapStateToProps","store","userState"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { View, Text, Image, FlatList, TouchableOpacity } from 'react-native'\nimport { FontAwesome5 } from '@expo/vector-icons';\nimport firebase from 'firebase'\nrequire('firebase/firestore')\nimport { connect } from 'react-redux'\n\nimport { text, utils, container, navbar } from '../styles'\n\nfunction Profile(props) {\n    const [userPosts, setUserPosts] = useState([]);\n    const [user, setUser] = useState(null);\n    const [following, setFollowing] = useState(false)\n\n    useEffect(() => {\n        const { currentUser, posts } = props;\n\n        if (props.route.params.uid === firebase.auth().currentUser.uid) {\n            setUser(currentUser)\n            setUserPosts(posts)\n        }\n        else {\n            firebase.firestore()\n                .collection(\"users\")\n                .doc(props.route.params.uid)\n                .get()\n                .then((snapshot) => {\n                    if (snapshot.exists) {\n                        setUser({ uid: props.route.params.uid, ...snapshot.data() });\n                    }\n                    else {\n                        console.log('does not exist')\n                    }\n                })\n            firebase.firestore()\n                .collection(\"posts\")\n                .doc(props.route.params.uid)\n                .collection(\"userPosts\")\n                .orderBy(\"creation\", \"desc\")\n                .get()\n                .then((snapshot) => {\n                    let posts = snapshot.docs.map(doc => {\n                        const data = doc.data();\n                        const id = doc.id;\n                        return { id, ...data }\n                    })\n                    setUserPosts(posts)\n                })\n        }\n\n        if (props.following.indexOf(props.route.params.uid) > -1) {\n            setFollowing(true);\n        } else {\n            setFollowing(false);\n        }\n\n    }, [props.route.params.uid, props.following, props.currentUser, props.posts])\n\n    const onFollow = () => {\n        firebase.firestore()\n            .collection(\"following\")\n            .doc(firebase.auth().currentUser.uid)\n            .collection(\"userFollowing\")\n            .doc(props.route.params.uid)\n            .set({})\n    }\n    const onUnfollow = () => {\n        firebase.firestore()\n            .collection(\"following\")\n            .doc(firebase.auth().currentUser.uid)\n            .collection(\"userFollowing\")\n            .doc(props.route.params.uid)\n            .delete()\n    }\n\n    if (user === null) {\n        return (\n            <View style={container.form}>\n                <Text style={text.notAvailable}>User Not Found</Text>\n            </View>\n        )\n    }\n    return (\n        <View style={[container.container, utils.backgroundWhite]}>\n            <View style={[navbar.custom, utils.justifyCenter]}>\n                <Text style={navbar.title}>{user.username}</Text>\n            </View>\n            <View style={[container.profileInfo]}>\n\n                <View style={[utils.noPadding, container.row]}>\n\n                    {user.image == 'default' ?\n                        (\n                            <FontAwesome5\n                                style={[utils.profileImageBig, utils.marginBottomSmall]}\n                                name=\"user-circle\" size={80} color=\"black\" />\n                        )\n                        :\n                        (\n                            <Image\n                                style={[utils.profileImageBig, utils.marginBottomSmall]}\n                                source={{\n                                    uri: user.image\n                                }}\n                            />\n                        )\n                    }\n\n                    <View style={[container.container, container.horizontal, utils.justifyCenter, utils.padding10Sides]}>\n\n                        <View style={[utils.justifyCenter, text.center, container.containerImage]}>\n                            <Text style={[text.bold, text.large, text.center]}>{userPosts.length}</Text>\n                            <Text style={[text.center]}>Posts</Text>\n                        </View>\n                        <View style={[utils.justifyCenter, text.center, container.containerImage]}>\n                            <Text style={[text.bold, text.large, text.center]}>{user.followersCount}</Text>\n                            <Text style={[text.center]}>Followers</Text>\n                        </View>\n                        <View style={[utils.justifyCenter, text.center, container.containerImage]}>\n                            <Text style={[text.bold, text.large, text.center]}>{user.followingCount}</Text>\n                            <Text style={[text.center]}>Following</Text>\n                        </View>\n                    </View>\n\n                </View>\n\n\n                <View>\n                    <Text style={text.bold}>{user.name}</Text>\n                    <Text style={[text.profileDescription, utils.marginBottom]}>{user.description}</Text>\n\n                    {props.route.params.uid !== firebase.auth().currentUser.uid ? (\n                        <View style={[container.horizontal]}>\n                            {following ? (\n                                <TouchableOpacity\n                                    style={[utils.buttonOutlined, container.container, utils.margin15Right]}\n                                    title=\"Following\"\n                                    onPress={() => onUnfollow()}>\n                                    <Text style={[text.bold, text.center, text.green]}>Following</Text>\n                                </TouchableOpacity>\n                            )\n                                :\n                                (\n                                    <TouchableOpacity\n                                        style={[utils.buttonOutlined, container.container, utils.margin15Right]}\n                                        title=\"Follow\"\n                                        onPress={() => onFollow()}>\n                                        <Text style={[text.bold, text.center]}>Follow</Text>\n                                    </TouchableOpacity>\n\n                                )}\n\n                            <TouchableOpacity\n                                style={[utils.buttonOutlined, container.container]}\n                                title=\"Follow\"\n                                onPress={() => props.navigation.navigate('Chat', {user})}>\n                                <Text style={[text.bold, text.center]}>Message</Text>\n                            </TouchableOpacity>\n                        </View>\n                    ) :\n                        <TouchableOpacity\n                            style={utils.buttonOutlined}\n                            onPress={() => props.navigation.navigate('Edit')}>\n                            <Text style={[text.bold, text.center]}>Edit Profile</Text>\n                        </TouchableOpacity>}\n                </View>\n            </View>\n\n\n\n            <View style={[utils.borderTopGray]}>\n                <FlatList\n                    numColumns={3}\n                    horizontal={false}\n                    data={userPosts}\n                    style={utils.marginBottomBar}\n                    renderItem={({ item }) => (\n                        <TouchableOpacity\n                            style={[container.containerImage, utils.borderWhite]}\n                            onPress={() => props.navigation.navigate(\"Post\", { item, user })}>\n\n                            <Image\n                                style={container.image}\n                                source={{ uri: item.downloadURL }}\n                            />\n                        </TouchableOpacity>\n\n                    )}\n\n                />\n            </View>\n        </View >\n\n    )\n}\n\nconst mapStateToProps = (store) => ({\n    currentUser: store.userState.currentUser,\n    posts: store.userState.posts,\n    following: store.userState.following\n})\nexport default connect(mapStateToProps, null)(Profile);\n"]},"metadata":{},"sourceType":"module"}